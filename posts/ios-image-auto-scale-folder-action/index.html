<!doctype html><html lang=zn-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>iOS开发工具：自动生成@2x,@3x图片 - 小於的宅基地</title><meta name=Description content="但愿每次回忆都不觉愧疚！"><meta property="og:title" content="iOS开发工具：自动生成@2x,@3x图片"><meta property="og:description" content="自从Apple推出iPhone 6 Plus后为了对其适配完美在做图片的时候又多了一种尺寸也就是@3x的。虽然新生代神器Sketch可以方便存成不同尺寸的图片，但是不可否认的是Photoshop在设计师心目中的神圣地位目前还是不可撼动的。为了提高工作效率我希望有一个工具或者流程可以在设计师给我一张6倍（2和3的最小公倍数）大小的图片后自动缩放生成2和3倍大小的图片。之前想过用拖拽（Drag & Drop）的方式来实现，最近了解到OS X有Finder Action的功能可以更加方便/适合做这个事情。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-25T16:16:00+08:00"><meta property="article:modified_time" content="2015-04-25T16:16:00+08:00"><meta property="og:site_name" content="小於的宅基地"><meta name=twitter:card content="summary"><meta name=twitter:title content="iOS开发工具：自动生成@2x,@3x图片"><meta name=twitter:description content="自从Apple推出iPhone 6 Plus后为了对其适配完美在做图片的时候又多了一种尺寸也就是@3x的。虽然新生代神器Sketch可以方便存成不同尺寸的图片，但是不可否认的是Photoshop在设计师心目中的神圣地位目前还是不可撼动的。为了提高工作效率我希望有一个工具或者流程可以在设计师给我一张6倍（2和3的最小公倍数）大小的图片后自动缩放生成2和3倍大小的图片。之前想过用拖拽（Drag & Drop）的方式来实现，最近了解到OS X有Finder Action的功能可以更加方便/适合做这个事情。"><meta name=application-name content="小於的宅基地"><meta name=apple-mobile-web-app-title content="小於的宅基地"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/><link rel=prev href=https://www.yuzhuohui.info/posts/qiugonglue-ios-offsers/><link rel=next href=https://www.yuzhuohui.info/posts/photo-sync-service/><link rel=stylesheet href=/css/style.min.b1428364f950d204d2aae123e017ba076d7df3ded8d33e27f6a1b6b1929c4507.css integrity="sha256-sUKDZPlQ0gTSquEj4Be6B219897Y0z4n9qG2sZKcRQc="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"iOS开发工具：自动生成@2x,@3x图片","inLanguage":"zn-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.yuzhuohui.info\/posts\/ios-image-auto-scale-folder-action\/"},"genre":"posts","wordcount":1340,"url":"https:\/\/www.yuzhuohui.info\/posts\/ios-image-auto-scale-folder-action\/","datePublished":"2015-04-25T16:16:00+08:00","dateModified":"2015-04-25T16:16:00+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"小於"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=小於的宅基地>小於的宅基地</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=https://kindle.yuzhuohui.info rel="noopener noreffer" target=_blank>Kindle </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=小於的宅基地>小於的宅基地</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=https://kindle.yuzhuohui.info title rel="noopener noreffer" target=_blank>Kindle</a><a href=javascript:void(0); class="menu-item theme-switch" title>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title></h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">iOS开发工具：自动生成@2x,@3x图片</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://twitter.com/Agassi_yzh title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>小於</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2015-04-25>2015-04-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span></span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#那么问题来了怎么做>那么问题来了，怎么做？</a></li><li><a href=#题外话>题外话</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>自从Apple推出<code>iPhone 6 Plus</code>后为了对其适配完美在做图片的时候又多了一种尺寸也就是<code>@3x</code>的。虽然新生代神器<code>Sketch</code>可以方便存成不同尺寸的图片，但是不可否认的是Photoshop在设计师心目中的神圣地位目前还是不可撼动的。为了提高工作效率我希望有一个工具或者流程可以在设计师给我一张6倍（2和3的最小公倍数）大小的图片后自动缩放生成2和3倍大小的图片。之前想过用拖拽（Drag & Drop）的方式来实现，最近了解到OS X有Finder Action的功能可以更加方便/适合做这个事情。</p><blockquote><p>Folder Actions is a feature of OS X that lets you associate AppleScript scripts with folders. A Folder Action script is executed when the folder to which it is attached is opened or closed, moved or resized, or has items added or removed. The script provides a handler that matches the appropriate format for the action, as described in this chapter.
Folder Actions make it easy to create hot folders that respond to external actions to trigger a workflow. For example, you can use a Folder Action script to initiate automated processing of any photo dropped in a targeted folder. A well written Folder Action script leaves the hot folder empty. This avoids repeated application of the action to the same files, and allows Folder Actions to perform more efficiently.
<em>from:<a href=https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_folder_actions.html title="Apple Developer" target=_blank rel="noopener noreffer">Apple Developer</a></em></p></blockquote><p>经过一段时间的摸索，我用下面的一段脚本来满足我的需求。</p><p>解释一下下面这段用AppleScript写的脚本的作用：</p><blockquote><p>首先可以指定一个文件夹来启用这个脚本。每当往这个文件夹中添加文件的时候脚本会被触发。脚本触发后先会检查一下添加的图片长和宽是否都是6的倍数，如果不符合会把图片放到<code>Error Images</code>的文件夹里面，并且会弹框提示哪些图片有问题（之前做了把提示朗读出来提醒设计师，感觉效果也不是很好）。如果验证通过那么会把图片压缩的两倍和三倍的大小放到<code>Processed Images</code>文件夹，文件名为也加上了熟悉的<code>@2x</code>和<code>@3x</code>。同时原图片文件会转移到<code>Original 文件夹</code>。</p></blockquote><p>效果如下：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/auto-scale-iOS-image-folder-action/process.gif data-srcset="/images/auto-scale-iOS-image-folder-action/process.gif, /images/auto-scale-iOS-image-folder-action/process.gif 1.5x, /images/auto-scale-iOS-image-folder-action/process.gif 2x" data-sizes=auto alt=/images/auto-scale-iOS-image-folder-action/process.gif title=/images/auto-scale-iOS-image-folder-action/process.gif></p><h3 id=那么问题来了怎么做>那么问题来了，怎么做？</h3><ol><li><p>打开<code>脚本编辑器</code>，把下面这段AppleScript脚本存到<code>~/Library/Scripts/Folder Action Scripts </code>文件夹，命名成<code>auto image scale</code>
{% gist agassiyzh/d00f6938cf5363709151 %}</p></li><li><p>对需要设置的文件夹右键，选择<code>服务</code>-><code>文件夹操作设置</code>，然后选择刚才存的<code>auto image scale</code>。具体操作如下图
<img class=lazyload src=/svg/loading.min.svg data-src=/images/auto-scale-iOS-image-folder-action/config.gif data-srcset="/images/auto-scale-iOS-image-folder-action/config.gif, /images/auto-scale-iOS-image-folder-action/config.gif 1.5x, /images/auto-scale-iOS-image-folder-action/config.gif 2x" data-sizes=auto alt=/images/auto-scale-iOS-image-folder-action/config.gif title=/images/auto-scale-iOS-image-folder-action/config.gif></p></li><li><p>OK,把需要转换的图片拖进这个文件夹就可以了。</p></li></ol><h3 id=题外话>题外话</h3><ol><li>Yosemite开始OS X中AppleScript可以用Javascript来替代。但是搜索到的资料和系统的的示例代码都是AppleScript写成的。而且<code>脚本编辑器</code>中JS的文档看起来也只是AppleScript文档的一个转译。又为了了解AppleScript所以直接用AppleScript写了。以后可以尝试用JS写一下毕竟可用的三方库多很多很多。</li><li>在<code>/Library/Scripts/Folder Action Scripts</code>中有一些系统预制的脚本可以参考。</li><li>设置Folder的文件夹，之后不要重命名。如果有需要，重命名后重新设置一下Folder Action。</li><li>设置了启用了Folder Action后会在会在<code>~/Library/LaunchAgents/</code>和生成<code>com.apple.FolderActions.enabled.plist</code>和<code>com.apple.FolderActions.folders.plist</code>两个启动plist。打开看看启示就是启动两个AppleScript。</li><li><code>Automator</code>也可以用来写Folder Action。只是限制比较多，需要灵活还是要用AppleScript/JS来写。作为工程师还是直接全部用脚本来写好了。</li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title=" Twitter" data-sharer=twitter data-url=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/ data-title=iOS开发工具：自动生成@2x,@3x图片 data-via=agassi_yzh><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title=" Facebook" data-sharer=facebook data-url=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title=" Hacker News" data-sharer=hackernews data-url=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/ data-title=iOS开发工具：自动生成@2x,@3x图片><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title=" Line" data-sharer=line data-url=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/ data-title=iOS开发工具：自动生成@2x,@3x图片><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title=" 微博" data-sharer=weibo data-url=https://www.yuzhuohui.info/posts/ios-image-auto-scale-folder-action/ data-title=iOS开发工具：自动生成@2x,@3x图片><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()></a></span>&nbsp;|&nbsp;<span><a href=/></a></span></section></div><div class=post-nav><a href=/posts/qiugonglue-ios-offsers/ class=prev rel=prev title=求攻略iOS开发工程师招聘><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>求攻略iOS开发工程师招聘</a>
<a href=/posts/photo-sync-service/ class=next rel=next title="照片同步服务－－iCloud Drive照片同步服务使用报告">照片同步服务－－iCloud Drive照片同步服务使用报告<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2011 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://twitter.com/Agassi_yzh target=_blank>小於</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"",maxShownLines:50},comment:{},lightgallery:!0}</script><script type=text/javascript src=/js/theme.min.b0df51c2c57145081cc73960e9aa780e6f5f56d06cf4ef0f96da8ce1619d1e12.js integrity="sha256-sN9RwsVxRQgcxzlg6ap4Dm9fVtBs9O8PltqM4WGdHhI="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-13148173-4",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-13148173-4" async></script></body></html>